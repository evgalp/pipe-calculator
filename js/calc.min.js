function RollingMill(e,l,i,a,t,n,r,o,c,u,s,d,m,f,b){return this.baseRollDiameter=e,this.sigmaHalf=l,this.sigma=2*this.sigmaHalf,this.alpha=serviceModule.toRadians(i),this.n=a,this.carriageStrokeLength=t,this.L=n,this.carriageStrokeLengthRotational=r,this.reductionSectionLength=o,this.trunnionDiameter=c,this.DkDcMax=u,this.m=s,this.mx=d,this.reductionZoneLength=m,this.frequency=f,this.mMax=b,this}function Route(e,l,i,a,t,n){return this.billetDiameterInitial=e,this.billetDiameterFinal=l,this.billetWallThicknessInitial=i,this.billetWallThicknessFinal=a,this.billetLengthInitial=t,this.billetWallThicknessInitial<=1&&(this.sigmaT=.12),this.billetWallThicknessInitial>1&&(this.sigmaT=.1),this.pauseTime=n,this}function Material(e,l){return this.sigmaB1=e,this.sigmaB2=l,this}String.prototype.float=function(){return parseFloat(this.replace(",","."))};var serviceModule=function(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function l(e){return e*(Math.PI/180)}function i(l,a){var t=[];return l.forEach(function(l){e(l)?t.push(l.toFixed(a)):l.constructor===Array?t.push(i(l,a)):t.push(l)}),t}return{isNumber:e,toRadians:l,roundNumericArrayValues:i}}(),calcModule=function(){function e(e,l){return rollSize={},rollSize.rebordDiameter=(e.baseRollDiameter-e.sigmaHalf)*Math.sin(e.alpha),rollSize.bottomRollDiameter=e.baseRollDiameter-l.billetDiameterFinal,rollSize.rebordMinimalThickness=l.billetDiameterFinal/2*.7*(1-Math.cos(e.alpha)),rollSize.effectiveRollDiameter=rollSize.bottomRollDiameter+.2*l.billetDiameterFinal,rollSize.alpha=serviceModule.toRadians(180/e.n),rollSize.beta=serviceModule.toRadians(15),rollSize}function l(e,l){var i={};return i.workLength=e.carriageStrokeLength/(1+e.DkDcMax),i.lb=e.L-i.workLength,i.ln=e.carriageStrokeLengthRotational/(1+e.DkDcMax),i.Yn=l.billetDiameterInitial/2-l.billetDiameterFinal/2,i.Yp=l.billetWallThicknessInitial-l.billetWallThicknessFinal,i.slope=(i.Yn-i.Yp)/e.reductionSectionLength,i.slope<=.06?i.slopeIsNormal=!0:i.slopeIsNormal=!1,i.elongation=(l.billetDiameterInitial-l.billetWallThicknessInitial)*l.billetWallThicknessInitial/((l.billetDiameterFinal-l.billetWallThicknessFinal)*l.billetWallThicknessFinal),i.horizontalSection=e.m*i.elongation/e.DkDcMax,i.calibratingSection=4*i.elongation*e.m/(rollSize.effectiveRollDiameter/e.trunnionDiameter),i.wallReductionSection=i.workLength-(i.ln+e.reductionSectionLength+i.horizontalSection+i.calibratingSection),i}function i(e,l){var i={};i.oneSectionLength=guidePlane.wallReductionSection/7,i.tp=parseFloat(l.sigmaT)+parseFloat(l.billetWallThicknessInitial),i.ut=i.tp/l.billetWallThicknessFinal;var a=[];a[0]=(i.ut+4.333)/5.333,a[1]=(i.ut+1.9091)/2.9091,a[2]=(i.ut+.8824)/1.8824,a[3]=(i.ut+.5238)/1.5238,a[4]=(i.ut+.28)/1.28,a[5]=(i.ut+.1236)/1.1236,a[6]=i.ut,i.u=a,i.t=a.map(function(e){return i.tp/e}),i.yp=i.tp-l.billetWallThicknessFinal,i.yi=i.t.map(function(e){return e-l.billetWallThicknessFinal}),i.bp=i.yp*e.L/(.5*guidePlane.lb+guidePlane.calibratingSection+guidePlane.horizontalSection+7*i.oneSectionLength);var t=[1,2,3,4,5,6,7];return i.bi=i.yi.map(function(l,a){return l*e.L/(.5*guidePlane.lb+guidePlane.calibratingSection+guidePlane.horizontalSection+(7-t[a])*i.oneSectionLength)}),rollSize.delta=(i.tp-i.t[0])/Math.sin(rollSize.alpha),rollSize.gamma=Math.asin(rollSize.delta/l.billetDiameterFinal),rollSize.reductionRadius=l.billetDiameterFinal/2*(1+(4*Math.pow(Math.cos(rollSize.alpha+rollSize.gamma),2)-1)/(2-2*Math.cos(rollSize.beta)*Math.cos(rollSize.alpha+rollSize.gamma))),i}function a(e,l,i){var a={};return a.wallReductionOne=guidePlaneProfile.tp-guidePlaneProfile.t[0],a.wallReductionTwo=guidePlaneProfile.t[0]-guidePlaneProfile.t[1],a.rogr=rollSize.bottomRollDiameter/2,a.deltaOne=.35*Math.sqrt(a.rogr/a.wallReductionOne),a.deltaTwo=.35*Math.sqrt(a.rogr/a.wallReductionTwo),a.elongationOne=guidePlaneProfile.tp/guidePlaneProfile.t[0],a.elongationTwo=guidePlaneProfile.tp/guidePlaneProfile.t[1],a.epsilonOne=100*(1-1/a.elongationOne),a.epsilonTwo=100*(1-1/a.elongationTwo),a.k1=1.05*i.sigmaB1,a.k2=1.05*i.sigmaB2,a.forwardSlipZonePressureOne=a.k1/a.deltaOne*((a.deltaOne-1)*Math.pow((guidePlaneProfile.tp,guidePlaneProfile.t[0],a.delta))-1),a.backwardSlipZonePressureOne=a.k1/a.deltaOne*((a.deltaOne-1)*Math.pow((guidePlaneProfile.tp,guidePlaneProfile.t[0],a.deltaOne))-1),a.backwardSlipZonePressureTwo=a.k2/a.deltaTwo*((a.deltaTwo-1)*Math.pow((guidePlaneProfile.t[0],guidePlaneProfile.t[1],a.deltaTwo))-1),a.forwardSlipZonePressureOne=a.k1/a.deltaOne*((a.deltaOne+1)*Math.pow((guidePlaneProfile.t[0],guidePlaneProfile.t[1],a.deltaOne))-1),a.forwardSlipZonePressureTwo=a.k2/a.deltaTwo*((a.deltaTwo+1)*Math.pow((guidePlaneProfile.t[1],guidePlaneProfile.t[2],a.deltaTwo))-1),a.p1=.5*(a.backwardSlipZonePressureOne+a.forwardSlipZonePressureOne),a.p2=.5*(a.backwardSlipZonePressureTwo+a.forwardSlipZonePressureTwo),a}function t(e,l){var i={};return i.elongationRatio=(l.billetDiameterInitial-l.billetWallThicknessInitial)*l.billetWallThicknessInitial/((l.billetDiameterFinal-l.billetWallThicknessFinal)*l.billetWallThicknessFinal),i.linearShift=e.reductionZoneLength*(i.elongationRatio/(i.elongationRatio-1))*Math.log(e.mx),i.hourProductivity=60/(1e3/(i.linearShift*e.frequency)+l.pauseTime/(60*i.elongationRatio*e.reductionZoneLength)),i}return{calcRollSize:e,calcGuidePlaneSize:l,calcGuidePlaneProfile:i,calcDeformation:a,calcProductivity:t}}(),cacheDomModule=function(){function e(){var e=a.find(".millSelect").val();if("mill_8_15"==e)var l=new RollingMill(53.15,.5,60,3,450,150,69,12,28.5,1.4,4.55,1.055,170,110,9);if("mill_15_30"==e)var l=new RollingMill(82,.5,60,3,455,210,69,12,45,1.6,4.55,1.055,170,90,12);return l}function l(){if("steel_20A"==a.find(".materialSelect").val())var e=new Material(660,720);return e}function i(){var e=a.find(".billetDiameterInitial").val().float(),l=a.find(".billetDiameterFinal").val().float(),i=a.find(".billetWallThicknessInitial").val().float(),t=a.find(".billetWallThicknessFinal").val().float();if(a.find(".billetLengthInitial").length)var n=a.find(".billetLengthInitial").val().float();if(a.find(".pauseTime").length)var r=a.find(".pauseTime").val().float();return new Route(e,l,i,t,n,r)}var a=$("#calcForm");return{cacheMill:e,cacheMaterial:l,cacheRoute:i}}(),renderModule=function(){function e(l,i,a){var t=0;for(key in i){null==a&&(a=document.createElement("tr"),l.appendChild(a));var n=document.createElement("td");n.textContent=key,a.appendChild(n);var r=i[key];if("object"!=typeof r){var n=document.createElement("td");n.textContent=r,a.appendChild(n),t+=1}else{var o=e(l,r,a);n.setAttribute("rowspan",o),t+=o}a=null}return t}function l(e,a,t){var n=$("<table></table>");t=void 0==t?0:++t,n.attr("id",a+t),n.attr("class","uk-align-center uk-table uk-table-striped uk-table-hover uk-table-divider");var r=$("<tbody></tbody>");return e.forEach(function(e){var i=$("<tr></tr>");e.forEach(function(e){var n=$("<td></td>");Array.isArray(e)?(e=l([e],a,t),e.attr("class",""),n.append(e)):(e=$("<div></div>").append($('<div class="data"></div>').append(e)).html(),n.append(e)),i.append(n)}),r.append(i)}),n.append(r),$("#calc-result").append(n),i("#"+a+t),n}function i(e){return $(e).each(function(){var l=$(this),i=[];$(e+">tbody>tr").each(function(){var e=0;$(this).find(">td").each(function(){e++,void 0===i[e]&&(i[e]=$("<tr></tr>")),i[e].append($(this))})}),$(e+">tbody>tr").remove(),$.each(i,function(){l.append(this)})}),!1}function a(){$("#domRollSizeTable0").length&&$("#domRollSizeTable0").remove(),$("#domGuidePlaneTable0").length&&$("#domGuidePlaneTable0").remove(),$("#domGuidePlaneProfileTable0").length&&$("#domGuidePlaneProfileTable0").remove(),$("#domDeformationTable0").length&&$("#domDeformationTable0").remove(),$("#domProductivityTable0").length&&$("#domProductivityTable0").remove()}function t(){l([["Діаметр реборд","Діаметр дна ролика","Мінімальна товщина реборд","Діаметр, що катає","α","β","δ","γ","Радіус випуску"],serviceModule.roundNumericArrayValues(Object.values(rollSize),2),["мм","мм","мм","мм","--","--","--","--","мм"]],"domRollSizeTable")}function n(){l([["Робоча довжина","Сумарна довжина ділянок виходу роликів із зіткнення з металом","Ділянка подачі і повороту","Зниження профілю планки в кінці ділянки подачі","Зниження профілю планки в кінці ділянки редукції","Ухил","Ухил в межах норми","Сумарна витяжка за прохід","Горизонтальна ділянка","Калібрувальна ділянка","Ділянка редукції стінки"],serviceModule.roundNumericArrayValues(Object.values(guidePlane),2),["мм","мм","мм","мм","мм","--","--","мм","мм","мм","мм"]],"domGuidePlaneTable")}function r(){l([["Обтиснення стінки на ділянці 0-1","Обтиснення стінки на ділянці 1-2","ρ гр","δ 1","δ 2","Коефіцієнт сумарної витяжки в перетині 1","Коефіцієнт сумарної витяжки в перетині 2","Ступінь деформації в перетині 1","Ступінь деформації в перетині 2","Опір деформації в перетині 1","Опір деформації в перетині 2","Контактний тиск 1 для зони випередження","Контактний тиск 2 для зони випередження","Контактний тиск 1 для зони відставання","Контактний тиск 2 для зони відставання","Середній контактний тиск 1 в перетині двузонного осередку деформації","Середній контактний тиск 2 в перетині двузонного осередку деформації"],serviceModule.roundNumericArrayValues(Object.values(deformation),2),["мм","мм","мм","--","--","--","--","%","%","МПа","МПа","МПа","МПа","МПа","МПа","МПа","МПа"]],"domDeformationTable")}function o(){l([["Довжина однієї секції","Товщина стінки на початку","Коефіцієнт обтиснення стінки","Коефіцієнт обтиснення стінки в кожному перетині","Товщина стінки в кожному перетині","Зниження профілю планки на початку","Зниження профілю планки в кожному перетині","Виоста підкладок на початку","Висота підкладок в кожному перетині"],serviceModule.roundNumericArrayValues(Object.values(guidePlaneProfile),2),["мм","мм","мм","мм","мм","мм","мм","мм","мм"]],"domGuidePlaneProfileTable")}function c(){l([["Коефіцієнт витяжки","Лінійне зміщення","Годинна продуктивність"],serviceModule.roundNumericArrayValues(Object.values(productivity)),["мм","--","м/год"]],"domProductivityTable")}return{addObjectToTable:e,addArraysToTable:l,transpose:i,clearTables:a,renderRollSizeTable:t,renderGuidePlaneTable:n,renderGuidePlaneProfileTable:o,renderDeformationTable:r,renderProductivityTable:c}}(),eventHandler=function(){function e(){var e=cacheDomModule.cacheMill(),l=cacheDomModule.cacheRoute();rollSize=calcModule.calcRollSize(e,l),guidePlane=calcModule.calcGuidePlaneSize(e,l),guidePlaneProfile=calcModule.calcGuidePlaneProfile(e,l),renderModule.clearTables(),renderModule.renderRollSizeTable(),renderModule.renderGuidePlaneTable(),renderModule.renderGuidePlaneProfileTable()}function l(){var e=cacheDomModule.cacheMill(),l=cacheDomModule.cacheRoute(),i=cacheDomModule.cacheMaterial();rollSize=calcModule.calcRollSize(e,l),guidePlane=calcModule.calcGuidePlaneSize(e,l),guidePlaneProfile=calcModule.calcGuidePlaneProfile(e,l),deformation=calcModule.calcDeformation(e,l,i),renderModule.clearTables(),renderModule.renderDeformationTable()}function i(){var e=cacheDomModule.cacheMill(),l=cacheDomModule.cacheRoute();cacheDomModule.cacheMaterial();productivity=calcModule.calcProductivity(e,l),renderModule.clearTables(),renderModule.renderProductivityTable()}function a(){renderModule.clearTables()}$(document).on("click","#calcInstrument",e),$(document).on("click","#calcDeformation",l),$(document).on("click","#calcProductivity",i),$("#clearCalc").on("click",a),$(document).on("click","#clearCalc",a)}();$("#show-calc-intrument-form").on("click",function(){$("#current-form").html('<div id="calcForm" class="uk-grid-large uk-grid-collapse calc-intrument"><div class="uk-background-muted uk-padding"><form class="calc-form uk-width-1-2 uk-align-center"> <div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="millSelect">Тип стану ХПТР:</label> <div class="uk-form-controls uk-form-width-medium"> <select name="millSelect" class="uk-select millSelect"> <option value="mill_8_15">ХПТР 8-15</option> <option value="mill_15_30">ХПТР 15-30</option> </select> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetDiameterInitial">Початковий діаметр, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetDiameterInitial" class="uk-input billetDiameterInitial" type="text" placeholder="Початковий діаметр"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetDiameterFinal">Кінцевий діаметр, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetDiameterFinal" class="uk-input billetDiameterFinal" type="text" placeholder="Кінцевий діаметр"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetWallThicknessInitial">Початкова товщина стінки, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetWallThicknessInitial" class="uk-input billetWallThicknessInitial" type="text" placeholder="Початкова товщина стінки"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetWallThicknessFinal">Кінцева товщина стінки, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetWallThicknessFinal" class="uk-input billetWallThicknessFinal" type="text" placeholder="Кінцева товщина стінки"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <div id="calcInstrument" name="calcInstrument" class="uk-button uk-button-primary">Виконати розрахунки</div><div id="clearCalc" name="clearCalc" class="uk-button uk-button-secondary">Очистити результати</div></div></form></div></div>'),validator.resetForm()}),$("#show-calc-deformation-form").on("click",function(){$("#current-form").html('<div id="calcForm" class="uk-grid-large uk-grid-collapse calc-deformation"><div class="uk-background-muted uk-padding"><form class="calc-form uk-width-1-2 uk-align-center"> <div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="millSelect">Тип стану ХПТР:</label> <div class="uk-form-controls uk-form-width-medium"> <select name="millSelect" class="uk-select millSelect"> <option value="mill_8_15">ХПТР 8-15</option> <option value="mill_15_30">ХПТР 15-30</option> </select> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="materialSelect">Матеріал:</label> <div class="uk-form-controls uk-form-width-medium"> <select name="materialSelect" class="uk-select materialSelect"> <option value="steel_20A">Сталь 20А</option> </select> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetDiameterInitial">Початковий діаметр, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetDiameterInitial" class="uk-input billetDiameterInitial" type="text" placeholder="Початковий діаметр"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetDiameterFinal">Кінцевий діаметр, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetDiameterFinal" class="uk-input billetDiameterFinal" type="text" placeholder="Кінцевий діаметр"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetWallThicknessInitial">Початкова товщина стінки, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetWallThicknessInitial" class="uk-input billetWallThicknessInitial" type="text" placeholder="Початкова товщина стінки"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetWallThicknessFinal">Кінцева товщина стінки, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetWallThicknessFinal" class="uk-input billetWallThicknessFinal" type="text" placeholder="Кінцева товщина стінки"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <div id="calcDeformation" name="calcDeformation" class="uk-button uk-button-primary">Виконати розрахунки</div><div id="clearCalc" name="clearCalc" class="uk-button uk-button-secondary">Очиcтити результати</div></div></form></div></div>')}),$("#show-calc-productivity-form").on("click",function(){$("#current-form").html('<div id="calcForm" class="uk-grid-large uk-grid-collapse calc-productivity"><div class="uk-background-muted uk-padding"><form class="calc-form uk-width-1-2 uk-align-center"> <div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="millSelect">Тип стану ХПТР:</label> <div class="uk-form-controls uk-form-width-medium"> <select name="millSelect" class="uk-select millSelect"> <option value="mill_8_15">ХПТР 8-15</option> <option value="mill_15_30">ХПТР 15-30</option> </select> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetDiameterInitial">Початковий діаметр, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetDiameterInitial" class="uk-input billetDiameterInitial" type="text" placeholder="Початковий діаметр"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetDiameterFinal">Кінцевий діаметр, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetDiameterFinal" class="uk-input billetDiameterFinal" type="text" placeholder="Кінцевий діаметр"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetWallThicknessInitial">Початкова товщина стінки, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetWallThicknessInitial" class="uk-input billetWallThicknessInitial" type="text" placeholder="Початкова товщина стінки"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetWallThicknessFinal">Кінцева товщина стінки, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetWallThicknessFinal" class="uk-input billetWallThicknessFinal" type="text" placeholder="Кінцева товщина стінки"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetLengthInitial">Довжина заготовки, м:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetLengthInitial" class="uk-input billetLengthInitial" type="text" placeholder="Довжина заготовки"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="pauseTime">Час пауз, с:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="pauseTime" class="uk-input pauseTime" type="text" placeholder="Час пауз"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <div id="calcProductivity" name="calcProductivity" class="uk-button uk-button-primary">Виконати розрахунки</div><div id="clearCalc" name="clearCalc" class="uk-button uk-button-secondary">Очистити результати</div></div></form></div></div>')}),$(document).ready(function(){!function(){$("#calcForm input").on("keyup blur",function(){$("#calcForm").valid()?$("button.calc-btn").prop("disabled",!1):$("button.calc-btn").prop("disabled","disabled")})}(),$.validator.setDefaults({errorClass:"help-block",highlight:function(e){$(e).closest("input").addClass("uk-form-danger")},unhighlight:function(e){$(e).closest("input").removeClass("uk-form-danger")},errorPlacement:function(e,l){"checkbox"===l.prop("type")?e.insertAfter(l.parent()):e.insertAfter(l)}}),function(){$("#calcForm").validate({rules:{billetDiameterInitial:{required:!0,range:function(e){if("mill_8_15"==$(".millSelect").val())return[9,17]}},billetDiameterFinal:{required:!0,range:function(e){if("mill_8_15"==$(".millSelect").val())return[8,15]}},billetWallThicknessInitial:{required:!0,range:function(e){if("mill_8_15"==$(".millSelect").val())return[.08,1.5]}},billetWallThicknessFinal:{required:!0,range:function(e){if("mill_8_15"==$(".millSelect").val())return[.08,1.5]}},billetLengthInitial:{required:!0},pauseTime:{required:!0}}})}()});