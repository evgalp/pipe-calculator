function RollingMill(e,t,i,n,l,o,r,a,s,c,u,d,h,f,m){return this.baseRollDiameter=e,this.sigmaHalf=t,this.sigma=2*this.sigmaHalf,this.alpha=serviceModule.toRadians(i),this.n=n,this.carriageStrokeLength=l,this.L=o,this.carriageStrokeLengthRotational=r,this.reductionSectionLength=a,this.trunnionDiameter=s,this.DkDcMax=c,this.m=u,this.mx=d,this.reductionZoneLength=h,this.frequency=f,this.mMax=m,this}function Route(e,t,i,n,l,o){return this.billetDiameterInitial=e,this.billetDiameterFinal=t,this.billetWallThicknessInitial=i,this.billetWallThicknessFinal=n,this.billetLengthInitial=l,this.billetWallThicknessInitial<=1&&(this.sigmaT=.12),this.billetWallThicknessInitial>1&&(this.sigmaT=.1),this.pauseTime=o,this}function Material(e,t){return this.sigmaB1=e,this.sigmaB2=t,this}String.prototype.float=function(){return parseFloat(this.replace(",","."))};var serviceModule=function(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e*(Math.PI/180)}function i(t,n){var l=[];return t.forEach(function(t){e(t)?l.push(t.toFixed(n)):t.constructor===Array?l.push(i(t,n)):l.push(t)}),l}return{isNumber:e,toRadians:t,roundNumericArrayValues:i}}(),calcModule=function(){function e(e,t){return rollSize={},rollSize.rebordDiameter=(e.baseRollDiameter-e.sigmaHalf)*Math.sin(e.alpha),rollSize.bottomRollDiameter=e.baseRollDiameter-t.billetDiameterFinal,rollSize.rebordMinimalThickness=t.billetDiameterFinal/2*.7*(1-Math.cos(e.alpha)),rollSize.effectiveRollDiameter=rollSize.bottomRollDiameter+.2*t.billetDiameterFinal,rollSize.alpha=serviceModule.toRadians(180/e.n),rollSize.beta=serviceModule.toRadians(15),rollSize}function t(e,t){var i={};return i.workLength=e.carriageStrokeLength/(1+e.DkDcMax),i.lb=e.L-i.workLength,i.ln=e.carriageStrokeLengthRotational/(1+e.DkDcMax),i.Yn=t.billetDiameterInitial/2-t.billetDiameterFinal/2,i.Yp=t.billetWallThicknessInitial-t.billetWallThicknessFinal,i.slope=(i.Yn-i.Yp)/e.reductionSectionLength,i.slope<=.06?i.slopeIsNormal=!0:i.slopeIsNormal=!1,i.elongation=(t.billetDiameterInitial-t.billetWallThicknessInitial)*t.billetWallThicknessInitial/((t.billetDiameterFinal-t.billetWallThicknessFinal)*t.billetWallThicknessFinal),i.horizontalSection=e.m*i.elongation/e.DkDcMax,i.calibratingSection=4*i.elongation*e.m/(rollSize.effectiveRollDiameter/e.trunnionDiameter),i.wallReductionSection=i.workLength-(i.ln+e.reductionSectionLength+i.horizontalSection+i.calibratingSection),i}function i(e,t){var i={};i.oneSectionLength=guidePlane.wallReductionSection/7,i.tp=parseFloat(t.sigmaT)+parseFloat(t.billetWallThicknessInitial),i.ut=i.tp/t.billetWallThicknessFinal;var n=[];n[0]=(i.ut+4.333)/5.333,n[1]=(i.ut+1.9091)/2.9091,n[2]=(i.ut+.8824)/1.8824,n[3]=(i.ut+.5238)/1.5238,n[4]=(i.ut+.28)/1.28,n[5]=(i.ut+.1236)/1.1236,n[6]=i.ut,i.u=n,i.t=n.map(function(e){return i.tp/e}),i.yp=i.tp-t.billetWallThicknessFinal,i.yi=i.t.map(function(e){return e-t.billetWallThicknessFinal}),i.bp=i.yp*e.L/(.5*guidePlane.lb+guidePlane.calibratingSection+guidePlane.horizontalSection+7*i.oneSectionLength);var l=[1,2,3,4,5,6,7];return i.bi=i.yi.map(function(t,n){return t*e.L/(.5*guidePlane.lb+guidePlane.calibratingSection+guidePlane.horizontalSection+(7-l[n])*i.oneSectionLength)}),rollSize.delta=(i.tp-i.t[0])/Math.sin(rollSize.alpha),rollSize.gamma=Math.asin(rollSize.delta/t.billetDiameterFinal),rollSize.reductionRadius=t.billetDiameterFinal/2*(1+(4*Math.pow(Math.cos(rollSize.alpha+rollSize.gamma),2)-1)/(2-2*Math.cos(rollSize.beta)*Math.cos(rollSize.alpha+rollSize.gamma))),i}function n(e,t,i){var n={};return n.wallReductionOne=guidePlaneProfile.tp-guidePlaneProfile.t[0],n.wallReductionTwo=guidePlaneProfile.t[0]-guidePlaneProfile.t[1],n.rogr=rollSize.bottomRollDiameter/2,n.deltaOne=.35*Math.sqrt(n.rogr/n.wallReductionOne),n.deltaTwo=.35*Math.sqrt(n.rogr/n.wallReductionTwo),n.elongationOne=guidePlaneProfile.tp/guidePlaneProfile.t[0],n.elongationTwo=guidePlaneProfile.tp/guidePlaneProfile.t[1],n.epsilonOne=100*(1-1/n.elongationOne),n.epsilonTwo=100*(1-1/n.elongationTwo),n.k1=1.05*i.sigmaB1,n.k2=1.05*i.sigmaB2,n.forwardSlipZonePressureOne=n.k1/n.deltaOne*((n.deltaOne-1)*Math.pow((guidePlaneProfile.tp,guidePlaneProfile.t[0],n.delta))-1),n.backwardSlipZonePressureOne=n.k1/n.deltaOne*((n.deltaOne-1)*Math.pow((guidePlaneProfile.tp,guidePlaneProfile.t[0],n.deltaOne))-1),n.backwardSlipZonePressureTwo=n.k2/n.deltaTwo*((n.deltaTwo-1)*Math.pow((guidePlaneProfile.t[0],guidePlaneProfile.t[1],n.deltaTwo))-1),n.forwardSlipZonePressureOne=n.k1/n.deltaOne*((n.deltaOne+1)*Math.pow((guidePlaneProfile.t[0],guidePlaneProfile.t[1],n.deltaOne))-1),n.forwardSlipZonePressureTwo=n.k2/n.deltaTwo*((n.deltaTwo+1)*Math.pow((guidePlaneProfile.t[1],guidePlaneProfile.t[2],n.deltaTwo))-1),n.p1=.5*(n.backwardSlipZonePressureOne+n.forwardSlipZonePressureOne),n.p2=.5*(n.backwardSlipZonePressureTwo+n.forwardSlipZonePressureTwo),n}function l(e,t){var i={};return i.elongationRatio=(t.billetDiameterInitial-t.billetWallThicknessInitial)*t.billetWallThicknessInitial/((t.billetDiameterFinal-t.billetWallThicknessFinal)*t.billetWallThicknessFinal),i.linearShift=e.reductionZoneLength*(i.elongationRatio/(i.elongationRatio-1))*Math.log(e.mx),i.hourProductivity=60/(1e3/(i.linearShift*e.frequency)+t.pauseTime/(60*i.elongationRatio*e.reductionZoneLength)),i}return{calcRollSize:e,calcGuidePlaneSize:t,calcGuidePlaneProfile:i,calcDeformation:n,calcProductivity:l}}(),cacheDomModule=function(){function e(){var e=n.find(".millSelect").val();if("mill_8_15"==e)var t=new RollingMill(53.15,.5,60,3,450,150,69,12,28.5,1.4,4.55,1.055,170,110,9);if("mill_15_30"==e)var t=new RollingMill(82,.5,60,3,455,210,69,12,45,1.6,4.55,1.055,170,90,12);return t}function t(){if("steel_20A"==n.find(".materialSelect").val())var e=new Material(660,720);return e}function i(){var e=n.find(".billetDiameterInitial").val().float(),t=n.find(".billetDiameterFinal").val().float(),i=n.find(".billetWallThicknessInitial").val().float(),l=n.find(".billetWallThicknessFinal").val().float();if(n.find(".billetLengthInitial").length)var o=n.find(".billetLengthInitial").val().float();if(n.find(".pauseTime").length)var r=n.find(".pauseTime").val().float();return new Route(e,t,i,l,o,r)}var n=$("#calcForm");return{cacheMill:e,cacheMaterial:t,cacheRoute:i}}(),renderModule=function(){function e(t,i,n){var l=0;for(key in i){null==n&&(n=document.createElement("tr"),t.appendChild(n));var o=document.createElement("td");o.textContent=key,n.appendChild(o);var r=i[key];if("object"!=typeof r){var o=document.createElement("td");o.textContent=r,n.appendChild(o),l+=1}else{var a=e(t,r,n);o.setAttribute("rowspan",a),l+=a}n=null}return l}function t(e,n,l){var o=$("<table></table>");l=void 0==l?0:++l,o.attr("id",n+l),o.attr("class","uk-align-center uk-table uk-table-striped uk-table-hover uk-table-divider");var r=$("<tbody></tbody>");return e.forEach(function(e){var i=$("<tr></tr>");e.forEach(function(e){var o=$("<td></td>");Array.isArray(e)?(e=t([e],n,l),e.attr("class",""),o.append(e)):(e=$("<div></div>").append($('<div class="data"></div>').append(e)).html(),o.append(e)),i.append(o)}),r.append(i)}),o.append(r),$("#calc-result").append(o),i("#"+n+l),o}function i(e){return $(e).each(function(){var t=$(this),i=[];$(e+">tbody>tr").each(function(){var e=0;$(this).find(">td").each(function(){e++,void 0===i[e]&&(i[e]=$("<tr></tr>")),i[e].append($(this))})}),$(e+">tbody>tr").remove(),$.each(i,function(){t.append(this)})}),!1}function n(){$("#domRollSizeTable0").length&&$("#domRollSizeTable0").remove(),$("#domGuidePlaneTable0").length&&$("#domGuidePlaneTable0").remove(),$("#domGuidePlaneProfileTable0").length&&$("#domGuidePlaneProfileTable0").remove(),$("#domDeformationTable0").length&&$("#domDeformationTable0").remove(),$("#domProductivityTable0").length&&$("#domProductivityTable0").remove()}function l(){t([["Діаметр реборд","Діаметр дна ролика","Мінімальна товщина реборд","Діаметр, що катає","α","β","δ","γ","Радіус випуску"],serviceModule.roundNumericArrayValues(Object.values(rollSize),2),["мм","мм","мм","мм","--","--","--","--","мм"]],"domRollSizeTable")}function o(){t([["Робоча довжина","Сумарна довжина ділянок виходу роликів із зіткнення з металом","Ділянка подачі і повороту","Зниження профілю планки в кінці ділянки подачі","Зниження профілю планки в кінці ділянки редукції","Ухил","Ухил в межах норми","Сумарна витяжка за прохід","Горизонтальна ділянка","Калібрувальна ділянка","Ділянка редукції стінки"],serviceModule.roundNumericArrayValues(Object.values(guidePlane),2),["мм","мм","мм","мм","мм","--","--","мм","мм","мм","мм"]],"domGuidePlaneTable")}function r(){t([["Обтиснення стінки на ділянці 0-1","Обтиснення стінки на ділянці 1-2","ρ гр","δ 1","δ 2","Коефіцієнт сумарної витяжки в перетині 1","Коефіцієнт сумарної витяжки в перетині 2","Ступінь деформації в перетині 1","Ступінь деформації в перетині 2","Опір деформації в перетині 1","Опір деформації в перетині 2","Контактний тиск 1 для зони випередження","Контактний тиск 2 для зони випередження","Контактний тиск 1 для зони відставання","Контактний тиск 2 для зони відставання","Середній контактний тиск 1 в перетині двузонного осередку деформації","Середній контактний тиск 2 в перетині двузонного осередку деформації"],serviceModule.roundNumericArrayValues(Object.values(deformation),2),["мм","мм","мм","--","--","--","--","%","%","МПа","МПа","МПа","МПа","МПа","МПа","МПа","МПа"]],"domDeformationTable")}function a(){t([["Довжина однієї секції","Товщина стінки на початку","Коефіцієнт обтиснення стінки","Коефіцієнт обтиснення стінки в кожному перетині","Товщина стінки в кожному перетині","Зниження профілю планки на початку","Зниження профілю планки в кожному перетині","Виоста підкладок на початку","Висота підкладок в кожному перетині"],serviceModule.roundNumericArrayValues(Object.values(guidePlaneProfile),2),["мм","мм","мм","мм","мм","мм","мм","мм","мм"]],"domGuidePlaneProfileTable")}function s(){t([["Коефіцієнт витяжки","Лінійне зміщення","Годинна продуктивність"],serviceModule.roundNumericArrayValues(Object.values(productivity)),["мм","--","м/год"]],"domProductivityTable")}return{addObjectToTable:e,addArraysToTable:t,transpose:i,clearTables:n,renderRollSizeTable:l,renderGuidePlaneTable:o,renderGuidePlaneProfileTable:a,renderDeformationTable:r,renderProductivityTable:s}}(),eventHandler=function(){function e(){var e=cacheDomModule.cacheMill(),t=cacheDomModule.cacheRoute();rollSize=calcModule.calcRollSize(e,t),guidePlane=calcModule.calcGuidePlaneSize(e,t),guidePlaneProfile=calcModule.calcGuidePlaneProfile(e,t),renderModule.clearTables(),renderModule.renderRollSizeTable(),renderModule.renderGuidePlaneTable(),renderModule.renderGuidePlaneProfileTable()}function t(){var e=cacheDomModule.cacheMill(),t=cacheDomModule.cacheRoute(),i=cacheDomModule.cacheMaterial();rollSize=calcModule.calcRollSize(e,t),guidePlane=calcModule.calcGuidePlaneSize(e,t),guidePlaneProfile=calcModule.calcGuidePlaneProfile(e,t),deformation=calcModule.calcDeformation(e,t,i),renderModule.clearTables(),renderModule.renderDeformationTable()}function i(){var e=cacheDomModule.cacheMill(),t=cacheDomModule.cacheRoute();cacheDomModule.cacheMaterial();productivity=calcModule.calcProductivity(e,t),renderModule.clearTables(),renderModule.renderProductivityTable()}function n(){renderModule.clearTables()}$(document).on("click","#calcInstrument",e),$(document).on("click","#calcDeformation",t),$(document).on("click","#calcProductivity",i),$("#clearCalc").on("click",n),$(document).on("click","#clearCalc",n)}();$("#show-calc-intrument-form").on("click",function(){$("#current-form").html('<div id="calcForm" class="uk-grid-large uk-grid-collapse calc-intrument"><div class="uk-background-muted uk-padding"><form class="calc-form uk-width-1-2 uk-align-center"> <div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="millSelect">Тип стану ХПТР:</label> <div class="uk-form-controls uk-form-width-medium"> <select name="millSelect" class="uk-select millSelect"> <option value="mill_8_15">ХПТР 8-15</option> <option value="mill_15_30">ХПТР 15-30</option> </select> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetDiameterInitial">Початковий діаметр, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetDiameterInitial" class="uk-input billetDiameterInitial" type="text" placeholder="Початковий діаметр"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetDiameterFinal">Кінцевий діаметр, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetDiameterFinal" class="uk-input billetDiameterFinal" type="text" placeholder="Кінцевий діаметр"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetWallThicknessInitial">Початкова товщина стінки, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetWallThicknessInitial" class="uk-input billetWallThicknessInitial" type="text" placeholder="Початкова товщина стінки"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetWallThicknessFinal">Кінцева товщина стінки, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetWallThicknessFinal" class="uk-input billetWallThicknessFinal" type="text" placeholder="Кінцева товщина стінки"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <div id="calcInstrument" name="calcInstrument" class="uk-button uk-button-primary">Виконати розрахунки</div><div id="clearCalc" name="clearCalc" class="uk-button uk-button-secondary">Очистити результати</div></div></form></div></div>')}),$("#show-calc-deformation-form").on("click",function(){$("#current-form").html('<div id="calcForm" class="uk-grid-large uk-grid-collapse calc-deformation"><div class="uk-background-muted uk-padding"><form class="calc-form uk-width-1-2 uk-align-center"> <div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="millSelect">Тип стану ХПТР:</label> <div class="uk-form-controls uk-form-width-medium"> <select name="millSelect" class="uk-select millSelect"> <option value="mill_8_15">ХПТР 8-15</option> <option value="mill_15_30">ХПТР 15-30</option> </select> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="materialSelect">Матеріал:</label> <div class="uk-form-controls uk-form-width-medium"> <select name="materialSelect" class="uk-select materialSelect"> <option value="steel_20A">Сталь 20А</option> </select> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetDiameterInitial">Початковий діаметр, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetDiameterInitial" class="uk-input billetDiameterInitial" type="text" placeholder="Початковий діаметр"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetDiameterFinal">Кінцевий діаметр, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetDiameterFinal" class="uk-input billetDiameterFinal" type="text" placeholder="Кінцевий діаметр"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetWallThicknessInitial">Початкова товщина стінки, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetWallThicknessInitial" class="uk-input billetWallThicknessInitial" type="text" placeholder="Початкова товщина стінки"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetWallThicknessFinal">Кінцева товщина стінки, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetWallThicknessFinal" class="uk-input billetWallThicknessFinal" type="text" placeholder="Кінцева товщина стінки"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <div id="calcDeformation" name="calcDeformation" class="uk-button uk-button-primary">Виконати розрахунки</div><div id="clearCalc" name="clearCalc" class="uk-button uk-button-secondary">Очиcтити результати</div></div></form></div></div>')}),$("#show-calc-productivity-form").on("click",function(){$("#current-form").html('<div id="calcForm" class="uk-grid-large uk-grid-collapse calc-productivity"><div class="uk-background-muted uk-padding"><form class="calc-form uk-width-1-2 uk-align-center"> <div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="millSelect">Тип стану ХПТР:</label> <div class="uk-form-controls uk-form-width-medium"> <select name="millSelect" class="uk-select millSelect"> <option value="mill_8_15">ХПТР 8-15</option> <option value="mill_15_30">ХПТР 15-30</option> </select> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetDiameterInitial">Початковий діаметр, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetDiameterInitial" class="uk-input billetDiameterInitial" type="text" placeholder="Початковий діаметр"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetDiameterFinal">Кінцевий діаметр, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetDiameterFinal" class="uk-input billetDiameterFinal" type="text" placeholder="Кінцевий діаметр"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetWallThicknessInitial">Початкова товщина стінки, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetWallThicknessInitial" class="uk-input billetWallThicknessInitial" type="text" placeholder="Початкова товщина стінки"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetWallThicknessFinal">Кінцева товщина стінки, мм:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetWallThicknessFinal" class="uk-input billetWallThicknessFinal" type="text" placeholder="Кінцева товщина стінки"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="billetLengthInitial">Довжина заготовки, м:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="billetLengthInitial" class="uk-input billetLengthInitial" type="text" placeholder="Довжина заготовки"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <label class="uk-form-label" for="pauseTime">Час пауз, с:</label> <div class="uk-form-controls uk-form-width-medium"> <input name="pauseTime" class="uk-input pauseTime" type="text" placeholder="Час пауз"> </div></div><div class="uk-margin uk-flex uk-flex-between"> <div id="calcProductivity" name="calcProductivity" class="uk-button uk-button-primary">Виконати розрахунки</div><div id="clearCalc" name="clearCalc" class="uk-button uk-button-secondary">Очистити результати</div></div></form></div></div>')}),$(document).ready(function(){!function(){$("#calcForm input").on("keyup blur",function(){$("#calcForm").valid()?$("button.calc-btn").prop("disabled",!1):$("button.calc-btn").prop("disabled","disabled")})}(),$.validator.setDefaults({errorClass:"help-block",highlight:function(e){$(e).closest("input").addClass("uk-form-danger")},unhighlight:function(e){$(e).closest("input").removeClass("uk-form-danger")},errorPlacement:function(e,t){"checkbox"===t.prop("type")?e.insertAfter(t.parent()):e.insertAfter(t)}}),function(){$("#calcForm").validate({rules:{billetDiameterInitial:{required:!0,range:function(e){if("mill_8_15"==$(".millSelect").val())return[9,17]}},billetDiameterFinal:{required:!0,range:function(e){if("mill_8_15"==$(".millSelect").val())return[8,15]}},billetWallThicknessInitial:{required:!0,range:function(e){if("mill_8_15"==$(".millSelect").val())return[.08,1.5]}},billetWallThicknessFinal:{required:!0,range:function(e){if("mill_8_15"==$(".millSelect").val())return[.08,1.5]}},billetLengthInitial:{required:!0},pauseTime:{required:!0}}})}()});